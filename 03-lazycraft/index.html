

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.jpg">
  <link rel="icon" href="/img/avatar.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="BlissfulAlloy79">
  <meta name="keywords" content="">
  
    <meta name="description" content="LazyCraft 的架设笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="MC 服务器架设笔记">
<meta property="og:url" content="https://blissfulalloy79.github.io/03-lazycraft/index.html">
<meta property="og:site_name" content="BlissfulAlloy&#39;s Blog">
<meta property="og:description" content="LazyCraft 的架设笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blissfulalloy79.github.io/img/03-lazycraft/lc_lobby.png">
<meta property="article:published_time" content="2022-07-01T08:17:05.000Z">
<meta property="article:modified_time" content="2023-02-06T10:10:01.945Z">
<meta property="article:author" content="BlissfulAlloy79">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="Minecraft">
<meta property="article:tag" content="服务器">
<meta property="article:tag" content="BungeeCord">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blissfulalloy79.github.io/img/03-lazycraft/lc_lobby.png">
  
  
  
  <title>MC 服务器架设笔记 - BlissfulAlloy&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"blissfulalloy79.github.io","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"§"},"progressbar":{"enable":false,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>BlissfulAlloy79&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-bilibili-fill"></i>
                <span>ACGN</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/bangumis/">
                    <i class="iconfont icon-bilibili-fill"></i>
                    <span>冻鳗与书籍</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/steamgames/">
                    <i class="iconfont icon-steam"></i>
                    <span>Steam</span>
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
		<li class="nav-item">
			<a class="nav-link" id="translateLink" href="javascript:translatePage();">
				繁
			</a>
			<script type="text/javascript" src="/js/tw_cn.js"></script>
			<script type="text/javascript">
			var defaultEncoding = 2; //网站编写字体是否繁体，1-繁体，2-简体
			var translateDelay = 0; //延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0
			var cookieDomain = "https://blissfulalloy79.lazycraft.top"; //Cookie地址, 一定要设定, 通常为你的网址
			var msgToTraditionalChinese = "繁" //此处可以更改为你想要显示的文字
			var msgToSimplifiedChinese = "简" //同上，但两处均不建议更改
			var translateButtonId = "translateLink"; //默认互换id
			translateInitilization();
			</script>
		</li>
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/03-lazycraft/lc_storage.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="MC 服务器架设笔记"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-07-01 16:17" pubdate>
          2022年7月1日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          7k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          59 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MC 服务器架设笔记</h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：2023年2月6日 晚上
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <p>LazyCraft 的架设笔记</p>
<span id="more"></span>
<h1>序：</h1>
<blockquote>
<p>我也算是个 Minecraft 的老玩家了</p>
<p>疫情期间，大概是2020年中，我在自己电脑上开了个和朋友们一起玩的服务器（主要是闲的蛋疼）,名为 LazyCraft</p>
<p>这篇笔记主要是把这些年来在开服过程中学到的东西都记录一下，对其他人有没有帮助不知道</p>
<p>但我不希望把学到的东西都忘掉</p>
</blockquote>
<h2 id="关于-LazyCraft：">关于 LazyCraft：</h2>
<p>此服务器运行于 Minecraft Java 原版服务端之上，附带一些优化 Mod 但并无添加非原版物品</p>
<p>服务器共有俩个子服，玩生存的 smp 以及镜像的创造服 cmp</p>
<p>此服务器的结构主要是在参考 <a target="_blank" rel="noopener" href="https://space.bilibili.com/392055878">TIS</a>，是另外一个非常厉害的生电服</p>
<h2 id="LazyCraft-的架构：">LazyCraft 的架构：</h2>
<p>这是 LazyCraft 目前的架构，仅供参考：</p>

<pre>
<code class="mermaid" >
flowchart LR
	subgraph Client
	A(Minecraft Java)
	B(Minecraft Bedrock)
	end
	A --> C
	B --> D
	C & D --> E
	subgraph Server
	C["Java port"]
	D["Bedrock port"]
	E{"Bungeecord + geyser"}
	F["smp + floodgate"]
	G["cmp + floodgate"]
	E <--> F & G	
	end
</code>
</pre>
<hr>
<blockquote>
<p><em><strong>注：阅读本文需要一定的电脑基础以及英文阅读能力，不懂的地方建议多查文档或者 Wiki</strong></em></p>
</blockquote>
<hr>
<h1>架构以及搭建教程：</h1>
<h2 id="单个服务端搭建：">单个服务端搭建：</h2>
<h3 id="原版服务端：">原版服务端：</h3>
<p>这是一个最基础的服务器，后面的任何升级都是基于此</p>
<ol>
<li class="lvl-3">
<p>首先，你需要为服务器创建一个文件夹：</p>
<ul class="lvl-2">
<li class="lvl-6">方便后续理解，这里命名为 <code>myserver</code></li>
<li class="lvl-6">这个文件夹最好放在 HDD 里，因为服务器将会长期读写，不建议 SSD</li>
<li class="lvl-6">请记住要为这个文件夹预留足够空间</li>
</ul>
</li>
<li class="lvl-3">
<p>下载 <code>server.jar</code></p>
<ul class="lvl-2">
<li class="lvl-6"><a target="_blank" rel="noopener" href="https://www.minecraft.net/en-us/download/server" title="传送门">从 Minecraft 官网</a></li>
</ul>
<p>或者</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>从 Minecraft 官方启动器里，点击 <code>Installations</code> 里的 <code>New installation</code></p>
</li>
<li class="lvl-6">
<p>在 <code>VERSION</code> 一栏的右侧找到 <code>SERVER</code> 字样的按钮</p>
</li>
<li class="lvl-6">
<p>点击下载</p>
</li>
</ul>
</li>
<li class="lvl-3">
<p>把刚刚下好的 <code>server.jar</code> 放到你的服务器文件夹里</p>
<ul class="lvl-2">
<li class="lvl-6">此时路径应是 <code>.\myserver\server.jar</code></li>
</ul>
</li>
<li class="lvl-3">
<p>执行 <code>server.jar</code></p>
<ul class="lvl-2">
<li class="lvl-6">双击，或</li>
<li class="lvl-6">在服务器文件夹路径执行</li>
</ul>
 <figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bat">java -Xmx2G -jar server.jar<br></code></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>此时应该没有任何反应，并且你会发现服务器文件夹里生成了一些文件</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>生成的文件中应该包括以下内容：</p>
<ul class="lvl-4">
<li class="lvl-10"><code>libraries</code>，Minecraft 服务器的库</li>
<li class="lvl-10"><code>logs</code>，服务器日志</li>
<li class="lvl-10"><code>versions</code>，Minecraft 服务器版本</li>
<li class="lvl-10"><code>eula.txt</code>，Eula 协议</li>
<li class="lvl-10"><code>server.jar</code>，Minecraft 服务端本体</li>
<li class="lvl-10"><code>server.properties</code>，服务端选项</li>
</ul>
</li>
</ul>
</li>
<li class="lvl-3">
<p>用文字编辑器打开 <code>eula.txt</code></p>
<ul class="lvl-2">
<li class="lvl-6">跟随里面的指示把 <code>eula=false</code> 改为 <code>eula=TRUE</code></li>
<li class="lvl-6">不改的话服务端将无法启动</li>
</ul>
</li>
<li class="lvl-3">
<p>再次执行 <code>server.jar</code></p>
<ul class="lvl-2">
<li class="lvl-6">应该会弹出来一个后台界面</li>
<li class="lvl-6">当后台界面的日志里出现 <code>Done</code> 字样，表示服务器启动成功</li>
</ul>
</li>
</ol>
<p>此时服务器文件夹目录结构应如下：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown">|-- myserver\<br><span class="hljs-code">    |-- banned-ips.json</span><br><span class="hljs-code">    |-- banned-players.json</span><br><span class="hljs-code">    |-- eula.txt</span><br><span class="hljs-code">    |-- ops.json</span><br><span class="hljs-code">    |-- server.jar</span><br><span class="hljs-code">    |-- server.properties</span><br><span class="hljs-code">    |-- usercache.json</span><br><span class="hljs-code">    |-- whitelist.json</span><br><span class="hljs-code">    |-- libraries\</span><br><span class="hljs-code">    |   |-- ...</span><br><span class="hljs-code">    |-- logs\</span><br><span class="hljs-code">	|   |-- ...</span><br><span class="hljs-code">    |-- versions\</span><br><span class="hljs-code">    |   |-- ...</span><br><span class="hljs-code">    |-- world\</span><br><span class="hljs-code">        |-- ...</span><br></code></pre></td></tr></table></figure>
<ol start="8">
<li class="lvl-3">
<p>至此，最基本的服务器已经部署完毕 o(￣▽￣)ｄ</p>
</li>
<li class="lvl-3">
<p>如何连接服务器：</p>
<ul class="lvl-2">
<li class="lvl-6">考虑这部分篇幅较长，故暂不放在这 （；´д｀）ゞ</li>
<li class="lvl-6">以后可能会开新博文来写有关这部分的东西（咕~</li>
<li class="lvl-6">又或者，在此文的最后一段加上（咕咕~</li>
</ul>
</li>
</ol>
<hr>
<h3 id="Fabric-服务端：">Fabric 服务端：</h3>
<p><s>我想给服务器来点优化怎么办？</s></p>
<p><s>这时候你就需要嵌套个 Fabric 服务端</s> ˋ( ° ▽、° )</p>
<p>Fabric 服务端可以为你的服务器添加 Mod，想玩一些辅助 Mod 或者想给服务器添加优化的话建议加上</p>
<p>原版：</p>

<pre>
<code class="mermaid" >
flowchart LR
a("client")
b["vanilla server"]
a --> b
</code>
</pre>
<p>有 Fabric 服务端：</p>

<pre>
<code class="mermaid" >
flowchart LR
a("client")
	subgraph Fabric
	direction RL
	b["vanilla server"]
	c["mods"]
	c -- With Fabric --> b
	end
a --> Fabric
</code>
</pre>
<p>由于 Fabric 是嵌套类的，所以你需要准备一个原版服务端</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a href="#%E5%8E%9F%E7%89%88%E6%9C%8D%E5%8A%A1%E7%AB%AF%EF%BC%9A" title="请按照顺序阅读哦">如何准备？</a></p>
</li>
</ul>
<ol>
<li class="lvl-3">
<p>安装 <code>fabric-installer</code></p>
<ul class="lvl-2">
<li class="lvl-6">和在客户端安装 Fabric 一样，前往<a target="_blank" rel="noopener" href="https://fabricmc.net/use/installer/" title="点我传送">Fabric 官网</a>下载一个 <code>fabric-installer</code></li>
</ul>
</li>
<li class="lvl-3">
<p>启动并安装 Fabric 服务端</p>
<ul class="lvl-2">
<li class="lvl-6">启动刚刚下载好的 <code>fabric-installer</code></li>
<li class="lvl-6">和安装客户端不同，请先到 Installer 的左上角选择 <code>服务端</code></li>
<li class="lvl-6">选择需要的游戏版本以及加载器版本（此处请留意 mod 的兼容性）</li>
<li class="lvl-6">安装位置请选择服务器文件夹，这里还是用 <code>myserver\</code> 做演示</li>
<li class="lvl-6">请确保安装的位置和 <code>server.jar</code> 是处于同一个</li>
</ul>
</li>
<li class="lvl-3">
<p>Fabric 服务端安装完成</p>
<ul class="lvl-2">
<li class="lvl-6">Fabric Installer 应该会弹出来一个成功界面</li>
<li class="lvl-6">可以在这里选择 <code>生成启动脚本</code></li>
</ul>
</li>
</ol>
<p>此时服务器文件夹目录结构应如下：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs markdown">|-- myserver\<br><span class="hljs-code">    |-- banned-ips.json</span><br><span class="hljs-code">    |-- banned-players.json</span><br><span class="hljs-code">    |-- directoryList.md</span><br><span class="hljs-code">    |-- eula.txt</span><br><span class="hljs-code">    |-- fabric-server-launch.jar</span><br><span class="hljs-code">    |-- fabric-server-launcher.properties</span><br><span class="hljs-code">    |-- ops.json</span><br><span class="hljs-code">    |-- server.jar</span><br><span class="hljs-code">    |-- server.properties</span><br><span class="hljs-code">    |-- start.bat</span><br><span class="hljs-code">    |-- start.sh</span><br><span class="hljs-code">    |-- usercache.json</span><br><span class="hljs-code">    |-- whitelist.json</span><br><span class="hljs-code">    |-- .fabric\</span><br><span class="hljs-code">    |   |-- ...</span><br><span class="hljs-code">    |-- libraries\</span><br><span class="hljs-code">    |   |-- ...</span><br><span class="hljs-code">    |-- logs\</span><br><span class="hljs-code">    |   |-- ...</span><br><span class="hljs-code">    |   |-- latest.log</span><br><span class="hljs-code">    |-- mods\</span><br><span class="hljs-code">    |-- versions\</span><br><span class="hljs-code">    |   |-- ...</span><br><span class="hljs-code">    |-- world</span><br><span class="hljs-code">        |-- ...</span><br></code></pre></td></tr></table></figure>
<p>多了些文件有没有发现</p>
<ol start="5">
<li class="lvl-3">
<p>启动服务器</p>
<ul class="lvl-2">
<li class="lvl-6">不能直接运行 <code>server.jar</code> ，不然不会启用 Fabric</li>
<li class="lvl-6">同路径执行另外一个 <code>.jar</code> 文件，应该是叫做 <code>fabric-server-launch.jar</code>，或</li>
<li class="lvl-6">执行</li>
</ul>
 <figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bat">java -Xmx2G -jar fabric-server-launch.jar nogui<br></code></pre></td></tr></table></figure>
<ul class="lvl-2">
<li class="lvl-6">
<p>日志显示 <code>Done</code> 字样，即为成功</p>
</li>
</ul>
</li>
<li class="lvl-3">
<p>至此，Fabric 服务端部署完毕 ╰(￣ω￣ｏ)</p>
</li>
</ol>
<hr>
<h3 id="服务端控制工具：">服务端控制工具：</h3>
<blockquote>
<p>注* 此处非必须</p>
</blockquote>
<p>单单是一个服务端我觉得不够，还需要一些插件来丰富游戏体验</p>
<p>在不影响原版服务端做为前提，这里我推荐 MCDR （五毛一条，记得删括号）</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Fallen-Breath/MCDReforged">https://github.com/Fallen-Breath/MCDReforged</a></p>
<p>如何部署等问题都能在他们的文档里解决，这里就不过多叙述</p>
<blockquote>
<p>为啥我会选择 MCDR ：</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>除了提升游戏内的体验，游戏外的管理也是非常的不错</p>
</li>
<li class="lvl-2">
<p>能很方便的解决你想要的刁钻小功能</p>
</li>
</ul>
</blockquote>
<p>一些插件能提升游玩体验，例如广播坐标、坐标记录器、聊天计算器、每日一句等等</p>
<p>这些功能都是可以通过其他方式做到的，加个 mod 就行了</p>
<p>但是有另外一些功能，用 mod 实现还是没那么好，例如存档备份以及回档，同步生存服区块至镜像服等</p>
<p>这些种种功能都是靠插件实现的，这些插件的开发难度非常低，上限却非常高</p>
<p>也就是说当你想到一个刁钻的想法，几乎没人去做，在经过简单的编程下就能实现了</p>
<p>你也可以经过长时间的研磨，把这个插件的功能做到非常强大</p>
<p>这些都是我个人认为的好处，实际上论实用程度还是因人而异</p>
<p>不管怎样，用了这么久的 MCDR，还是觉得有必要推荐一下的 (｡･∀･)ﾉﾞ</p>
<hr>
<h2 id="多个服务端搭建：">多个服务端搭建：</h2>
<blockquote>
<p>一个服务器我看还不够，那就开多几个吧 §(*￣▽￣*)§</p>
</blockquote>
<p>LazyCraft 原本是只有一个 smp (生存服)，我<s>在深思熟虑之后</s>决定开多一个镜像创造服（cmp）</p>
<p>其实开多一个服很简单，主要还是重复上面的步骤，只不过就要在 <code>server.properties</code> 里面把端口号改改就行了</p>
<ol>
<li class="lvl-3">
<p>先重复上面的步骤开多一个服</p>
</li>
<li class="lvl-3">
<p>打开 <code>server.properties</code> 并找到 <code>server-port=</code></p>
</li>
<li class="lvl-3">
<p>把后面的端口号改成和第一个服务器不一样即可</p>
</li>
</ol>
<blockquote>
<p><em><strong>请确保新的端口号未被占用</strong></em></p>
</blockquote>
<ol start="4">
<li class="lvl-3">
<p>启动服务器，搞腚（</p>
</li>
</ol>
<hr>
<h3 id="多服务端互联（BungeeCord）：">多服务端互联（BungeeCord）：</h3>
<blockquote>
<p>换个服务器就要退出再进入，麻不麻烦，直接在游戏里打个指令不久好了吗 ￣へ￣</p>
</blockquote>
<p>有个叫做 <a target="_blank" rel="noopener" href="https://www.spigotmc.org/wiki/bungeecord/" title="传送门">BungeeCord</a> 的玩意，它可以直接在游戏内连接不同的服务器，不再需要退回服务器列表</p>
<p>这个东西原本应该是给 Spigot 服务端用的，不过他也支持原版服务端，对于多子服的服务器就很方便</p>
<p>如何架设：</p>
<ol>
<li class="lvl-3">
<p>在你的服务器文件同级为 BungeeCord 新建一个文件夹：</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>为后续理解，这里命名为 <code>bungeecord</code></p>
</li>
<li class="lvl-6">
<p>此时目录结构应该如下：</p>
</li>
</ul>
 <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">|-- serverdir\<br><span class="hljs-code">	|-- bungeecord\</span><br><span class="hljs-code">	|-- myserver\</span><br><span class="hljs-code">		|-- ...</span><br></code></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>前往 <a target="_blank" rel="noopener" href="https://ci.md-5.net/job/BungeeCord/" title="传送门">BungeeCord 的 Jenkins</a> 并下载最新的 Artifact：</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>在 <code>Last Successful Artifacts</code> 那部分点击 <code>BungeeCord.jar</code> 即可下载</p>
</li>
<li class="lvl-6">
<p>只用下载 <code>.jar</code> 文件足矣</p>
</li>
</ul>
</li>
<li class="lvl-3">
<p>下载完后，把 <code>BungeeCord.jar</code> 放到刚刚新建的文件夹里：</p>
<ul class="lvl-2">
<li class="lvl-6">这里作为演示把 <code>BungeeCord.jar</code> 放到 <code>bungeecord</code> 里面</li>
</ul>
</li>
<li class="lvl-3">
<p>双击执行 <code>BungeeCord.jar</code> ：</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>此时它会在文件夹里生成一堆文件</p>
</li>
<li class="lvl-6">
<p>此时你的 BungeeCord 目录应该如下：</p>
</li>
</ul>
 <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown">|-- serverdir\<br><span class="hljs-code">	|-- bungeecord\</span><br><span class="hljs-code">	|   |-- BungeeCord.jar</span><br><span class="hljs-code">	|   |-- config.yml</span><br><span class="hljs-code">	|   |-- locations.yml</span><br><span class="hljs-code">	|   |-- modules.yml</span><br><span class="hljs-code">	|   |-- proxy.log.0</span><br><span class="hljs-code">	|   |-- proxy.log.0.lck</span><br><span class="hljs-code">	|   |-- modules\</span><br><span class="hljs-code">	|   |   |-- ...</span><br><span class="hljs-code">	|   |-- plugins\</span><br><span class="hljs-code">	|-- myserver\</span><br><span class="hljs-code">		|-- ...</span><br></code></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>看到这么多文件，先别慌，现在唯一需要做的就是配置 <code>config.yml</code> ，其余文件基本上都不会用到</p>
</li>
<li class="lvl-3">
<p>配置 <code>config.yml</code> ：</p>
<blockquote>
<p>详细配置请参考 <a target="_blank" rel="noopener" href="https://www.spigotmc.org/wiki/bungeecord-configuration-guide/" title="传送">BungeeCord Wiki</a> ，内容实在是太多太多了，这里就只讲些我觉得重要的项目</p>
</blockquote>
<ul class="lvl-2">
<li class="lvl-6">
<p><code>online_mode</code> 可按照自己需求开或者关</p>
</li>
<li class="lvl-6">
<p><code>servers</code> 请填写你的子服名字以及配置，有多少个服就写多少个：</p>
<ul class="lvl-4">
<li class="lvl-10">举个例子，我有俩个服，位于端口<code>25565</code>的 smp ，以及位于<code>25585</code>的 cmp ：</li>
</ul>
  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">smp:</span>								<span class="hljs-comment"># 服务器名称，***十分非常建议***使用 lowercase</span><br>	<span class="hljs-attr">motd:</span> <span class="hljs-string">This</span> <span class="hljs-string">is</span> <span class="hljs-string">the</span> <span class="hljs-string">smp</span> <span class="hljs-string">server</span>	<span class="hljs-comment"># 服务器的 motd</span><br>	<span class="hljs-attr">address:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:25565</span>		<span class="hljs-comment"># 子服的 IP 以及端口号</span><br>	<span class="hljs-attr">restricted:</span> <span class="hljs-literal">false</span>				<span class="hljs-comment"># 是否为限制（开限制的服务器只有有权限许可才能进入）</span><br>  <span class="hljs-attr">cmp:</span>								<span class="hljs-comment"># 请***记得使用*** lowercase</span><br>	<span class="hljs-attr">motd:</span> <span class="hljs-string">This</span> <span class="hljs-string">is</span> <span class="hljs-string">the</span> <span class="hljs-string">cmp</span> <span class="hljs-string">server</span>	<span class="hljs-comment"># 同上</span><br>	<span class="hljs-attr">address:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:25585</span>		<span class="hljs-comment"># 同上</span><br>	<span class="hljs-attr">restricted:</span> <span class="hljs-literal">false</span>				<span class="hljs-comment"># 同上</span><br></code></pre></td></tr></table></figure>
</li>
<li class="lvl-6">
<p><code>listeners</code> ，监听端口：</p>
<ul class="lvl-4">
<li class="lvl-10">
<p><code>query_port</code> ，你将通过这个端口访问服务器</p>
<blockquote>
<p>如果 <code>query_port</code> 填 <code>25577</code> ，那连接服务器时就要填写 <code>&#123;服务器 IP&#125;:&#123;25577&#125;</code></p>
</blockquote>
</li>
<li class="lvl-10">
<p><code>priorities</code> ，填写优先子服（刚刚的服务器名称），如果启用 <code>force_default_server</code> 的话每次进入就会默认是这个子服</p>
</li>
<li class="lvl-10">
<p><code>force_default_server</code> ，是否启用默认服务器，启用的话每次加入都会是指定服务器， 不启用则每次加入都是上次退出的服务器</p>
</li>
<li class="lvl-10">
<p><code>bind_local_address</code> ，默认开启，除非你的系统有多 IP 地址，通常不会动这个</p>
</li>
<li class="lvl-10">
<p><code>host</code> ，默认 <code>0.0.0.0:25577</code> ，表示 BungeeCord 会在哪个 IP 和端口上运行，这个也通常不用动</p>
</li>
</ul>
</li>
</ul>
</li>
<li class="lvl-3">
<p>配置子服 <code>server.properties</code> ：</p>
<blockquote>
<p>使用 BungeeCord 的话原版子服必须要关掉 <code>online-mode</code>，不然无法使用</p>
<p>（BungeeCord 本身就只是给 Spigot 用的，想使用原版端只能做些妥协 ㄟ( ▔, ▔ )ㄏ）</p>
</blockquote>
<ul class="lvl-2">
<li class="lvl-6">
<p>将 <strong>所有子服</strong> 的 <code>online-mode</code> 设置为 <code>false</code> ：</p>
<ul class="lvl-4">
<li class="lvl-10">
<p>这不代表关闭了正版验证，只是一旦使用了 BungeeCord 就只能关掉，不然无法加入游戏</p>
</li>
<li class="lvl-10">
<p>无需担心关掉正版验证后的皮肤加载问题，只要是通过 BungeeCord 连接的都能正确显示皮肤</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>搞腚 ヾ(￣▽￣)</p>
<ol start="8">
<li class="lvl-3">
<p>连接</p>
<blockquote>
<p>启用 BungeeCord 后就不要直接使用原本服务端的端口来连接了，否则会造成一系列问题例如皮肤加载等</p>
</blockquote>
<ul class="lvl-2">
<li class="lvl-6">
<p>如需连接就要使用 BungeeCord 的端口，默认就是 <code>25577</code></p>
</li>
<li class="lvl-6">
<p>连接 IP ：<code>&#123;本机 IP&#125;:&#123;25577&#125;</code></p>
</li>
</ul>
</li>
</ol>
<p><s>（之后可能如果有空的话应该大概会出一个有关 BungeeCord 的详细教程以及一路来踩的坑</s></p>
<p>（先鸽了，拜拜</p>
<hr>
<h3 id="跨版本连接：">跨版本连接：</h3>
<h4 id="不同-Java-版本：">不同 Java 版本：</h4>
<blockquote>
<p>玩多了都知道，装了亿堆优化 Mod 以及各种原因的服务器更新是个非常蛋疼的事</p>
<p>服务器版本更新不一定跟得上客户端更新，何况 Mojang 还经常来些小更新（<code>.1 .2 .3</code>）</p>
<p>运维要死人力 (ノ｀Д)ノ</p>
</blockquote>
<p>不过，社区玩家们开发了一个 BungeeCord 插件，叫做 <a target="_blank" rel="noopener" href="https://github.com/ViaVersion/ViaVersion" title="github">ViaVersion</a></p>
<p>这个插件能让高版本玩家透过 BungeeCord 加入低版本服务器</p>
<p>设置插件：</p>
<ol>
<li class="lvl-3">
<p>前往 <a target="_blank" rel="noopener" href="https://github.com/ViaVersion/ViaVersion" title="github">ViaVersion GitHub</a> 下载最新 Release</p>
</li>
<li class="lvl-3">
<p>将 <code>.jar</code> 文件放进 <code>bungeecord\</code> 文件里的 <code>plugins\</code></p>
</li>
<li class="lvl-3">
<p>启动 BungeeCord</p>
</li>
<li class="lvl-3">
<p>此时刚刚的 <code>plugins\</code> 文件夹里应该多了一个也叫做 <code>ViaVersion</code> 的文件夹，里面装的是 <code>config.yml</code> ：</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>这个是 ViaVersion 的 config 文件，默认不用动就已经设置完成了</p>
</li>
<li class="lvl-6">
<p>不过你可以按照情况修改 config，ViaVersion 有官方文档供查阅</p>
</li>
</ul>
</li>
</ol>
<p>到这部就已经设置完成力 (｡･∀･)ﾉﾞ</p>
<hr>
<h4 id="Bedrock-Edition-（基岩版）连接-Java-服务器：">Bedrock Edition （基岩版）连接 Java 服务器：</h4>
<blockquote>
<p><s>有玩家只有 BE （基岩版）怎么办，有办法让 BE 进 Java 的服务器吗 ＞︿＜</s></p>
<p>MC 官方都买一送一了，直接用 Java 版连不就行了吗 &lt;( ￣^￣)(θ(θ☆( &gt;_&lt;</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.geysermc.org/geyser/" title="传送">Geyser 官方文档</a></p>
<blockquote>
<p>由于 Geyser 的使用情况非常situational，本文只用 LazyCraft 的案例教学，还是老话，建议多查官方文档</p>
<p><s>（等哪天我突然想来个完整教程再说，不过大概率不会</s></p>
</blockquote>
<p>LazyCraft 正在使用 BungeeCord ，所以 Geyser 将会是以 <code>BungeeCord 插件</code> 的形式设置</p>
<p>除了 <code>BungeeCord 插件</code> ，Geyser 也提供 Standalong 设置，也就是不依赖 BungeeCord</p>
<p>设置 BungeeCord 插件：</p>
<ol>
<li class="lvl-3">
<p>前往 <a target="_blank" rel="noopener" href="https://ci.opencollab.dev/job/GeyserMC/job/Geyser/job/master/" title="传送">Geyser 的 build server</a> 下载最新的 <code>Geyser-BungeeCord.jar</code> 的文件</p>
</li>
<li class="lvl-3">
<p>将 <code>Geyser-BungeeCord.jar</code> 文件放进 <code>plugins\</code></p>
</li>
<li class="lvl-3">
<p>启动 BungeeCord</p>
</li>
<li class="lvl-3">
<p>此时应该会在 <code>plugins\</code> 生成一些配置文件：</p>
<ul class="lvl-2">
<li class="lvl-6">
<p><code>plugins\Geyser-BungeeCord\</code> 这是 Geyser 的配置文件路径</p>
</li>
<li class="lvl-6">
<p>你会动的只有 <code>config.yml</code> ，其他一律不用管</p>
</li>
</ul>
</li>
<li class="lvl-3">
<p>理论上无需再手动配置 <code>config.yml</code> ，直接就能用了，有兴趣的话可以自行查看文档</p>
</li>
<li class="lvl-3">
<p>连接：</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>BE 连接默认端口是 <code>19132</code> ， 除非你修改过 <code>config.yml</code> 的端口，否则直接填写 <code>本机 IP</code> 以及 <code>19132</code> 即可</p>
</li>
<li class="lvl-6">
<p><em><strong>注意，BE 是不允许本机连接本机的，所以测试时请使用其他机子（手机等）连接</strong></em></p>
</li>
</ul>
</li>
</ol>
<p>另外，</p>
<blockquote>
<p>如果你的服务器已开启 <code>online-mode</code> ，或</p>
<p>你想让 BE 玩家正确的显示皮肤</p>
</blockquote>
<p><em>那么请在安装 Geyser 插件之外也装一下 <a target="_blank" rel="noopener" href="https://wiki.geysermc.org/floodgate/" title="传送">Floodgate</a></em></p>
<blockquote>
<p>还是利用 LazyCraft 的案例教学，本服 Floodgate 是搭配 BungeeCord 使用</p>
</blockquote>
<p>设置 Floodgate：</p>
<ol>
<li class="lvl-3">
<p><a target="_blank" rel="noopener" href="https://ci.opencollab.dev/job/GeyserMC/job/Floodgate/job/master/" title="下载">下载 BungeeCord 插件版的 Floodgate</a>：</p>
<ul class="lvl-2">
<li class="lvl-6">选择 <code>floodgate-bungee.jar</code></li>
</ul>
</li>
<li class="lvl-3">
<p>将 <code>floodgate-bungee.jar</code> 文件放进 <code>plugins\</code></p>
</li>
<li class="lvl-3">
<p>启动 BungeeCord ，启动完成后可以关掉了</p>
</li>
<li class="lvl-3">
<p>此时 <code>plugins\</code> 文件夹应该会生成一些 floodgate 的配置文件：</p>
<ul class="lvl-2">
<li class="lvl-6">
<p><code>plugins\floodgate\</code> 这是 floodgate 的配置文件路径</p>
</li>
<li class="lvl-6">
<p>理论上你是<em><strong>不需要</strong></em>去动 floodgate 的 <code>config.yml</code> ，有兴趣的可以自行查看文档</p>
</li>
</ul>
</li>
<li class="lvl-3">
<p>配置 Geyser 的 <code>config.yml</code> ：</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>打开 Geyser 的 <code>config.yml</code> ，路径是 <code>plugins\Geyser-BungeeCord\config.yml</code></p>
</li>
<li class="lvl-6">
<p>将 <code>remote</code> 里的 <code>auth-type</code> 更改为 <code>floodgate</code></p>
</li>
</ul>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">remote:</span><br>	<span class="hljs-attr">auth-type:</span> <span class="hljs-string">floodgate</span><br></code></pre></td></tr></table></figure>
<ul class="lvl-2">
<li class="lvl-6">
<p>保存</p>
</li>
</ul>
</li>
<li class="lvl-3">
<p>搞腚，再次启动 BungeeCord 就可以了 ˋ( ° ▽、° )</p>
</li>
</ol>
<hr>
<h2 id="连接：">连接：</h2>
<p>新开了博文来专门写这部分</p>
<p>(￣﹃￣)</p>
<a class="btn" href="https://blissfulalloy79.github.io/04-mcserverconnect/"  title="点我前往" target="_blank">点我前往</a>
<hr>
<h1>后记：</h1>
<p>呼，终于写完这一篇啦 （；´д｀）ゞ</p>
<p>从七月初挖坑结果咕了一整个暑假到现在九月中终于是把坑填上了（大力吸气</p>
<p>说句实在话，这篇下来一直都忽略了不少东西</p>
<p>当初希望这份笔记不要写的太复杂，结果中途就一直注重着「简洁」，内容只做到了「跟着做就能运行」的程度</p>
<p>其中缺乏了很多解释，某些部分感觉描述起来特别麻烦的就只留下了个「可以自行查看文档」</p>
<p>文中用词欠缺统一，读起来可能会有点乱 &lt;(＿　＿)&gt;</p>
<p>作为我第一份长篇（？笔记，日后我也会去想办法完善的 (‾◡◝)</p>
<p>cya~</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%AC%94%E8%AE%B0/" class="category-chain-item">笔记</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E7%AC%94%E8%AE%B0/">#笔记</a>
      
        <a href="/tags/Minecraft/">#Minecraft</a>
      
        <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/">#服务器</a>
      
        <a href="/tags/BungeeCord/">#BungeeCord</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>MC 服务器架设笔记</div>
      <div>https://blissfulalloy79.github.io/03-lazycraft/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>BlissfulAlloy79</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年7月1日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/04-mcserverconnect/" title="MC 服务器连接笔记">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">MC 服务器连接笔记</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/02-software/" title="实用软件收录">
                        <span class="hidden-mobile">实用软件收录</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createCssLink('https://lib.baomitu.com/waline/2.5.1/waline.min.css')
      Fluid.utils.createScript('https://lib.baomitu.com/waline/2.5.1/waline.min.js', function() {
        var options = Object.assign(
          {"serverURL":"https://waline-6bmghd4bb-blissfulalloy79.vercel.app/","path":"window.location.pathname","meta":["nick","mail","link"],"requiredMeta":["nick"],"lang":"zh-CN","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],"dark":"html[data-user-color-scheme=\"dark\"]","wordLimit":0,"pageSize":10},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        Waline.init(options);
        Fluid.utils.waitElementVisible('#waline .vcontent', () => {
          var imgSelector = '#waline .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> 
    </div>
  
  
  
  
</div>
  </footer>

  <!-- Scripts -->
  

<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/leancloud.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<!-- hexo injector body_end start -->
<script type="text/javascript" color="220,220,220" opacity='0.7' zIndex="-2" count="200" src="/js/blacklines.js"></script>
<!-- hexo injector body_end end --></body>
</html>
